<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description"
        content="Vali is a responsive and free dashboard theme/template built with Bootstrap 5, SASS and PUG.js.">
    <!-- Twitter meta-->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:site" content="@pratikborsadiya">
    <meta property="twitter:creator" content="@pratikborsadiya">
    <!-- Open Graph Meta-->
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="Vali Admin">
    <meta property="og:title" content="Vali Admin - Free Bootstrap 5 Dashboard Template">
    <meta property="og:url" content="http://pratikborsadiya.in/vali-admin">
    <meta property="og:image" content="http://pratikborsadiya.in/blog/vali-admin/hero-social.png">
    <meta property="og:description"
        content="Vali is a responsive and free dashboard theme/template built with Bootstrap 5, SASS and PUG.js.">
    <title>Vali Admin - Free Bootstrap 5 Dashboard Template</title>
    <link rel="stylesheet" href="css/css">
     <link rel="stylesheet" href="css/_css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
    <link rel="stylesheet" type="text/css" href="css/bootstrap-icons.css">
</head>

<body>
    <div class="container">
        <h2>Crear Producto</h2>
        <form id="createForm" enctype="multipart/form-data">
            <input type="text" name="name" placeholder="Nombre" required><br>
            <input type="text" name="description" placeholder="Descripci칩n" required><br>
            <input type="number" name="price" placeholder="Precio" required><br>
            <input type="file" name="image"><br>
            <button type="submit">Crear Producto</button>
        </form>
        <h2>Listar productos</h2>
        <div class="productos"></div>
        <script>
            // Crear Producto
            document.getElementById('createForm').addEventListener('submit', async (e) => {
                e.preventDefault();
                const formData = new FormData(e.target);
                try {
                    const response = await fetch('/products', {
                        method: 'POST',
                        body: formData
                    });
                    const data = await response.json();
                    alert('Producto creado exitosamente');
                } catch (error) {
                    console.error('Error:', error);
                }
            });
            // Funci칩n para obtener productos y mostrarlos en .productos
            async function getProducts() {
                try {
                    const response = await fetch('/products');
                    const products = await response.json();

                    const productosDiv = document.querySelector('.productos');
                    productosDiv.innerHTML = ''; // Limpiar contenido previo

                    products.forEach(product => {
                        const productElement = document.createElement('div');
                        productElement.classList.add('col-md-4', 'col-lg-4', 'col-sm-4', 'border', 'p-3', 'mb-3', 'w-100');
                        productElement.innerHTML = `
                        <div class="title">
                            <div class="title-title-w-btn">
                                <h3 class="title">${product.name}</h3>                                
                            </div>
                            ${product.image?.secure_url ? `<img src="${product.image.secure_url}" alt="${product.name}" width="100">` : ''}
                        </div>
                        <div class="tile-body">
                            <b>Card with button group </b>
                            <p>${product.description}</p>
                            <p>Precio: $${product.price}</p>
                        </div>
                        <div class="btn-group">
                            <a class="btn btn-primary" href="#">
                                <i class="bi bi-plus-square fs-5"></i>
                            </a>
                            <a class="btn btn-primary" href="#">
                               <i class="bi bi-pencil-square fs-5"></i>
                            </a>
                            <a class="btn btn-primary" href="#">
                                <i class="bi bi-trash fs-5"></i>
                            </a>
                        </div>
                        `;
                        productosDiv.appendChild(productElement);
                    });
                } catch (error) {
                    console.error('Error al obtener productos:', error);
                }
            }
            // Llamar a la funci칩n para mostrar productos al cargar la p치gina
            window.addEventListener('DOMContentLoaded', getProducts);
        </script>
        <hr>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/script.js"></script>
</body>

</html>